{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/assets/scripts/components/accordions.js","src/assets/scripts/components/states.js","src/assets/scripts/components/tabPanels.js","src/assets/scripts/main.js","src/assets/scripts/tools/preventNested.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","elem","keyCodes","parameters","behaviours","dataset","behaviour","split","states","state","tabindexes","tabindex","targets","target","addEventListener","event","preventDefault","setState","which","enter","add","ariaAttributes","type","init","setClass","stateClass","classList","remove","toggle","setAria","forEach","ariaAttribute","hasAttribute","setAttribute","getAttribute","setTabindex","index","elems","document","querySelectorAll","component","tabs","_preventNested2","default","panels","tabPanels","firstTab","lastTab","firstPanel","getElementById","lastPanel","tab","prevTab","nextTab","panel","prevPanel","nextPanel","openTab","left","up","right","down","home","end","_ref","closeTab","closeTabs","focus","escape","testComponentType","dataComponent","_states2","_tabPanels2","components","toto","_accordions2","console","log","MutationObserver","mutations","mutation","addedNodes","observe","body","childList","subtree","selectors","selector","parent","parentNode","push"],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* accordions\n ========================================================================== */\n\nconst Accordions = (() => {\n  return 3;\n})();\n\nexport default Accordions;\n","/* states\n ========================================================================== */\n\nconst add = 'add';\nconst remove = 'remove';\nconst toggle = 'toggle';\nconst ariaAttributes = [\n  {\n    type: 'aria-hidden',\n    init: true,\n  },\n  {\n    type: 'aria-disabled',\n    init: true,\n  },\n  {\n    type: 'aria-selected',\n    init: false,\n  },\n  {\n    type: 'aria-expanded',\n    init: false,\n  },\n  {\n    type: 'aria-pressed',\n    init: false,\n  },\n  {\n    type: 'aria-checked',\n    init: false,\n  },\n];\n\nconst setClass = function (elem, stateClass, behaviour) {\n  if (stateClass !== 'false') {\n    if (behaviour === add) {\n      elem.classList.add(stateClass);\n    } else if (behaviour === remove) {\n      elem.classList.remove(stateClass);\n    } else {\n      elem.classList.toggle(stateClass);\n    }\n  }\n};\n\nconst setAria = function (elem, behaviour) {\n  ariaAttributes.forEach((ariaAttribute) => {\n    const { type, init } = ariaAttribute;\n\n    if (elem.hasAttribute(type)) {\n      if (behaviour === add) {\n        elem.setAttribute(type, !init);\n      } else if (behaviour === remove) {\n        elem.setAttribute(type, init);\n      } else {\n        elem.setAttribute(type, elem.getAttribute(type) !== 'true');\n      }\n    }\n  });\n};\n\nconst setTabindex = function (elem, tabindex, behaviour) {\n  if (tabindex === 'true') {\n    if (behaviour === add) {\n      elem.setAttribute('tabindex', 0);\n    } else if (behaviour === remove) {\n      elem.setAttribute('tabindex', -1);\n    } else {\n      elem.setAttribute('tabindex', elem.getAttribute('tabindex') === '-1' ? 0 : -1);\n    }\n  }\n};\n\nconst setState = function (parameters) {\n  parameters.behaviours.forEach((behaviour, index) => {\n    const elems = document.querySelectorAll(`.${parameters.targets[index]}`);\n    const stateClass = parameters.states[index];\n    const tabindex = parameters.tabindexes !== null ? parameters.tabindexes[index] : null;\n\n    elems.forEach((elem) => {\n      if (behaviour === add) {\n        setClass(elem, stateClass, add);\n        setAria(elem, add);\n        setTabindex(elem, tabindex, add);\n      } else if (behaviour === remove) {\n        setClass(elem, stateClass, remove);\n        setAria(elem, remove);\n        setTabindex(elem, tabindex, remove);\n      } else {\n        setClass(elem, stateClass, toggle);\n        setAria(elem, toggle);\n        setTabindex(elem, tabindex, toggle);\n      }\n    });\n  });\n};\n\nexport default function state(elem, keyCodes) {\n  const parameters = {\n    behaviours: elem.dataset.behaviour.split(', '),\n    states: elem.dataset.state.split(', '),\n    tabindexes: elem.dataset.tabindex ? elem.dataset.tabindex.split(', ') : null,\n    targets: elem.dataset.target.split(', '),\n  };\n\n  elem.addEventListener('click', (event) => {\n    event.preventDefault();\n\n    setState(parameters);\n  });\n  elem.addEventListener('keydown', (event) => {\n    if (event.which === keyCodes.enter) {\n      event.preventDefault();\n\n      setState(parameters);\n    }\n  });\n}\n","/* tab panels\n ========================================================================== */\n\nimport preventNested from './../tools/preventNested';\n\nconst closeTab = function (tab, panel) {\n  tab.setAttribute('tabindex', -1);\n  tab.setAttribute('aria-selected', false);\n  panel.setAttribute('aria-hidden', true);\n};\n\nconst closeTabs = function (tabs, panels) {\n  tabs.forEach((tab, index) => {\n    closeTab(tab, panels[index]);\n  });\n};\n\nconst openTab = function (tab, panel, { tabs, panels }) {\n  closeTabs(tabs, panels);\n\n  tab.focus();\n  tab.setAttribute('tabindex', 0);\n  tab.setAttribute('aria-selected', true);\n  panel.setAttribute('aria-hidden', false);\n};\n\nexport default function tabPanel(component, keyCodes) {\n  const tabs = preventNested(component.querySelectorAll('[role=\"tab\"]'), component);\n  const panels = preventNested(component.querySelectorAll('[role=\"tabpanel\"]'), component);\n  const tabPanels = { tabs, panels };\n  const firstTab = tabs[0];\n  const lastTab = tabs[tabs.length - 1];\n  const firstPanel = document.getElementById(firstTab.getAttribute('aria-controls'));\n  const lastPanel = document.getElementById(lastTab.getAttribute('aria-controls'));\n\n  tabs.forEach((tab, index) => {\n    const prevTab = tabs[index - 1] || lastTab;\n    const nextTab = tabs[index + 1] || firstTab;\n    const panel = document.getElementById(tab.getAttribute('aria-controls'));\n    const prevPanel = document.getElementById(prevTab.getAttribute('aria-controls'));\n    const nextPanel = document.getElementById(nextTab.getAttribute('aria-controls'));\n\n    // open tab\n    tab.addEventListener('click', (event) => {\n      event.preventDefault();\n\n      openTab(tab, panel, tabPanels);\n    });\n\n    // open prev tab\n    tab.addEventListener('keydown', (event) => {\n      if (event.which === keyCodes.left || event.which === keyCodes.up) {\n        event.preventDefault();\n\n        openTab(prevTab, prevPanel, tabPanels);\n      }\n    });\n\n    // open next tab\n    tab.addEventListener('keydown', (event) => {\n      if (event.which === keyCodes.right || event.which === keyCodes.down) {\n        event.preventDefault();\n\n        openTab(nextTab, nextPanel, tabPanels);\n      }\n    });\n\n    // open first tab\n    tab.addEventListener('keydown', (event) => {\n      if (event.which === keyCodes.home) {\n        event.preventDefault();\n\n        openTab(firstTab, firstPanel, tabPanels);\n      }\n    });\n\n    // open last tab\n    tab.addEventListener('keydown', (event) => {\n      if (event.which === keyCodes.end) {\n        event.preventDefault();\n\n        openTab(lastTab, lastPanel, tabPanels);\n      }\n    });\n  });\n}\n","/* main\n ========================================================================== */\n\nimport state from './components/states';\nimport tabPanel from './components/tabPanels';\nimport Accordions from './components/accordions';\n\nconst keyCodes = {\n  tab: 9,\n  enter: 13,\n  escape: 27,\n  end: 35,\n  home: 36,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n};\n\nconst testComponentType = function (component) {\n  const dataComponent = component.dataset.component;\n\n  if (dataComponent === 'state') {\n    state(component, keyCodes);\n  }\n  if (dataComponent === 'tab') {\n    tabPanel(component, keyCodes);\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const components = document.querySelectorAll('[data-component]');\n\n  const toto = Accordions;\n  console.log(toto);\n\n  components.forEach((component) => {\n    testComponentType(component);\n  });\n\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      mutation.addedNodes.forEach((component) => {\n        if (typeof component.getAttribute === 'function') {\n          if (component.getAttribute('data-component')) {\n            testComponentType(component);\n          }\n        }\n      });\n    });\n  });\n  observer.observe(document.body, {\n    childList: true,\n    subtree: true,\n  });\n});\n","/* prevent nested\n ========================================================================== */\n\nexport default function preventNested(selectors, component) {\n  const elems = [];\n\n  selectors.forEach((selector) => {\n    let parent = selector.parentNode;\n\n    while (parent !== component) {\n      if (parent.dataset.component === component.dataset.component) {\n        return;\n      }\n      parent = parent.parentNode;\n    }\n    elems.push(selector);\n  });\n\n  return elems;\n}\n"]}